<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">src/reducePrototypeChain.js | API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <a data-ice="repoURL" href="https://github.com/CircleOfNice/reducePrototypeChain" class="repo-url-github">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-reduceInheritanceChain">reduceInheritanceChain</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-reducePrototypeChain">reducePrototypeChain</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/reducePrototypeChain.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">/*
 * This file is part of CoreWorker.
 *
 * CoreWorker is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * CoreWorker is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 * GNU General Public License for more details.
 * You should have received a copy of the GNU General Public License
 * along with CoreWorker.  If not, see &lt;http://www.gnu.org/licenses/&gt;.
 *
 * Copyright 2017 TeeAge-Beatz UG (haftungsbeschr&#xE4;nkt)
 */

// @flow

export type Reducer = (dest: *, proto: Object, instance: Object) =&gt; *;

/**
 * takes an object and reduces its prototype chain with
 * a given callback
 *
 * @param  {Object}    instance to be reduced
 * @param  {Reducer}   reducer  function
 * @param  {*}         carry    to be reduced into
 * @param  {Function?} stop     constructor to break reducer
 * @return {*}
 */
export function reducePrototypeChain(instance: Object, reducer: Reducer, carry: any, stop?: Function = Object): any {
    const proto = Object.getPrototypeOf(instance);

    if(proto === stop.prototype) return carry;

    const result = reducer(carry, proto, instance);

    return reducePrototypeChain(proto, reducer, result, stop);
}

/**
 * takes a class and reduces its prototype chain with
 * a given callback
 *
 * @param  {Function}  constr  constructor function of class
 * @param  {Reducer}   reducer function
 * @param  {*}         carry   to be reduced into
 * @param  {Function?} stop    constructor to break reducer
 * @return {*}
 */
export function reduceInheritanceChain(constr: Function, reducer: Reducer, carry: any, stop?: Function = Object): any {
    return reducePrototypeChain(Object.create(constr.prototype, {}), reducer, carry, stop);
}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.4.8)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
